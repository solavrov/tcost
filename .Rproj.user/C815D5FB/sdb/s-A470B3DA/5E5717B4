{
    "collab_server" : "",
    "contents" : "\n#' Load liquidity data from files\n#'\n#' Attributes:\n#' spreads - spreads in percentage;\n#' terms - terms of bonds;\n#' volumes - trade volumes\n#'\n#' @param file Names of csc data files without extansion\n#' @param instrument Names of instruments\n#'\n#' @return Liquidity data object\n#' @export\nloadLiquidity <- function(file = c(\"liq_data/liq_t\", \"liq_data/liq_b\"),\n                          instrument = c(\"T\", \"B\")) {\n\n  liq <- list()\n\n  len <- length(file)\n\n  for (i in 1:len) {\n\n    m <- as.matrix(\n      read.csv(paste0(file[i],\".csv\"), header = FALSE)\n      )\n\n    d1 <- dim(m)[1]\n    d2 <- dim(m)[2]\n\n    rownames(m) <- paste0(\"t\", 1:d1 - 1)\n    colnames(m) <- paste0(\"v\", 1:d2 - 1)\n\n    liq[[instrument[i]]]$spreads <- m[2:d1, 2:d2]\n    liq[[instrument[i]]]$terms <- m[2:d1, 1]\n    liq[[instrument[i]]]$volumes <- m[1, 2:d2]\n\n  }\n\n  return (liq)\n\n}\n\n\n#' Return spread for a given bond trade\n#'\n#' @param term Bond's term to maturity in years\n#' @param volume Volume of trade in millions\n#' @param instrument Name of instrument\n#' @param liquidity Liquidity data object\n#'\n#' @return Spread in percentage\n#' @export\ngetSpread <- function(term, volume, instrument, liquidity) {\n\n  len <- length(instrument)\n  spread <- numeric()\n\n  for (i in 1:len)\n    spread[i] <- akima::bilinear(liquidity[[instrument[i]]]$term,\n                                 liquidity[[instrument[i]]]$volumes,\n                                 liquidity[[instrument[i]]]$spreads,\n                                 term[i],\n                                 volume[i])$z\n\n  spread[which(spread == 0)] <- NA\n\n  return (spread)\n\n}\n\n\n#' Return cost of trade\n#'\n#' @param volume Volume of trade in millions\n#' @param spread Spread of trade in percentage\n#'\n#' @return Cost in millions\n#' @export\ngetCost <- function(volume, spread) {\n  volume * spread / 100 / 2\n}\n\n\n",
    "created" : 1511275339999.000,
    "dirty" : false,
    "encoding" : "WINDOWS-1251",
    "folds" : "",
    "hash" : "3205411726",
    "id" : "5E5717B4",
    "lastKnownWriteTime" : 1511276709,
    "last_content_update" : 1511276709707,
    "path" : "C:/R/projects/tcost/R/tcost.R",
    "project_path" : "R/tcost.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}